<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="./index.css">
  <link rel="stylesheet" href="../课后/CSS/bootstrap.css" />
  <script src="../课堂/JS.js/jQuery.min.js"></script>
</head>

<body style="padding: 15px;">
  <!-- 添加图书的Panel面板 -->
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">添加新图书</h3>
    </div>
    <div class="panel-body form-inline">

      <div class="input-group">
        <div class="input-group-addon">书名</div>
        <input type="text" class="form-control" id="bookname" placeholder="请输入书名">
      </div>

      <div class="input-group">
        <div class="input-group-addon">作者</div>
        <input type="text" class="form-control" id="author" placeholder="请输入作者">
      </div>

      <div class="input-group">
        <div class="input-group-addon">出版社</div>
        <input type="text" class="form-control" id="publisher" placeholder="请输入出版社">
      </div>

      <button id="btnAdd" class="btn btn-primary">添加</button>

    </div>
  </div>


  <!-- 图书的表格 -->
  <table class="table table-bordered table-hover">
    <thead>
      <tr>
        <th>Id</th>
        <th>书名</th>
        <th>作者</th>
        <th>出版社</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody id="tb"></tbody>
  </table>
  <!-- http://www.liulongbin.top:3006/api/getbooks -->
  <!-- http://www.liulongbin.top:3006/api/delbook -->
  <!-- http://www.liulongbin.top:3006/api/addbook -->
 
 <!-- <script>
   $(function(){
    function getList(){
      $.get('http://www.liulongbin.top:3006/api/getbooks',res=>{
          const {status ,data} = res
          $('#tb').empty()  //清除调用函数的重复列表
          if(  status !== 200) return alert('获取图书列表失败！')
          const rows = []
          $.each(data,(i,item)=>{
          const {id,bookname,author,publisher} = item
             rows.push(`<tr><td>${id}</td><td>${bookname}</td><td>${author}</td><td>${publisher}</td><td><a href="javascript:;" class="del" data-id=${id}>删除</a></td></tr>`)
          })
         $('#tb').append(rows)
      })
    }
    getList()

//  删除

   $('#tb').on('click','.del',function(e){
   const id = $(this).attr('data-id')
    $.get('http://www.liulongbin.top:3006/api/delbook',{id:id},res=>{
      const {status,msg} = res
      if(status !==200) return alert('删除失败！')
      alert(msg)
      getList()
    })
   })

  //  添加图书
  $('#btnAdd').on('click',()=>{
    const bookname = $('#bookname').val().trim()
    const author = $('#author').val().trim()
    const publisher = $('#publisher').val().trim()
    $.post('http://www.liulongbin.top:3006/api/addbook',{bookname,author,publisher},res=>{
         const {status ,msg} = res
         if( status !==201) return alert('添加图书失败！')
         alert(msg)
         getList()
         $('#bookname').val('')
         $('#author').val('')
         $('#publisher').val('')
    })
  })
   })

 </script> -->

</body>

</html>